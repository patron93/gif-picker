$(function(){var t=$(".start-js"),e=$(".page-js"),n={amountStartItems:20,amountLoadedItem:20,amountPopularTags:25},o={count:n.amountStartItems,gifCol:gifObj.items,loadContent:function(t){var e=$(document).height(),n=$(".position-js").offset().top,o=this.gifCol.length,s=o-this.count;n>=e-100&&this.count+t<=o?(i.pushContainer(this.count,t,this.gifCol),this.count+=t):n>=e-100&&s<t&&(i.pushContainer(this.count,s,this.gifCol),this.count+=s)}},s=function(){function e(t){var e;for(e=0;e<gifObj.items.length;e++)gifObj.items[e].keys.indexOf(t)>-1&&s.push(gifObj.items[e]);return s}var s=[];return{showResult:function(a){s=[],e(a),t.find("img").attr("src"," "),t.empty(),s.length<=n.amountStartItems?i.pushContainer(0,s.length,s):i.pushContainer(0,n.amountStartItems,s),o.gifCol=s,o.count=n.amountStartItems}}}(),a=function(){var t,e,o,s,a=[],i={};for(t=0;t<gifObj.items.length;t++)for(e=0;e<gifObj.items[t].keys.length;e++)i[s=gifObj.items[t].keys[e]]?i[s]+=1:i[s]=1;for(o in i)a.push({name:o,value:i[o]});return a.sort(function(t,e){return e.value-t.value}),{allTags:function(){var t,e;for($(".hash-js").append('<div class="container-fluid"><div class="row"><ul class="all-tags all-tags-js"></ul></div></div>'),t=$(".all-tags-js"),e=0;e<a.length;e++)t.append("<li>#"+a[e].name+"</li>")},mostPopular:function(){var t,e,o,s;for($(".most-popular-js").append('<ul class="popular popular-js"></ul>'),e=(t=$(".popular-js")).width(),o=0,s=0;s<n.amountPopularTags&&!(o>e-100);s++)t.append("<li>#"+a[s].name+"</li>"),o+=t.find("li").eq(s).outerWidth(!0)+5}}}(),i=function(){function e(e,n){var o,s,a,i,l;(o=document.createElement("div")).className="col-xl-2 col-lg-3 col-md-4 col-sm-6",(s=document.createElement("div")).className="thumb thumb-js",(a=document.createElement("img")).src=e,(i=document.createElement("ul")).className="tags tags-js",$.each(n,function(t,e){(l=document.createElement("li")).innerHTML="#"+e,i.appendChild(l)}),s.appendChild(a),s.appendChild(i),o.appendChild(s),t.append(o)}return{pushContainer:function(t,n,o){var s;for(s=t;s<t+n;s++)e(o[s].src,o[s].keys)}}}();({init:function(){this._addElements(),this._startItems(),this._clickEvents(),this._scrollEvents()},_startItems:function(){i.pushContainer(0,n.amountStartItems,gifObj.items)},_addElements:function(){$("body").prepend('<div class="done done-top done-js done-top-js"></div><div class="done done-bot done-js done-bot-js"></div><div class="position position-js"></div>'),$(".most-popular-js").append(a.mostPopular()),$(".hash-js").append(a.allTags())},_clickEvents:function(){e.on("click","li",function(t){var e=$(this).text().slice(1);s.showResult(e),$(".close-js").show(),t.stopPropagation()}),e.on("click",".thumb-js",function(){var e=$(this).find("img").attr("src"),n=e.slice(0,e.length-2)+"orig";window.getSelection().removeAllRanges(),t.append('<p class="select">'+n+"</p>");try{var o=document.querySelector(".select"),s=document.createRange();s.selectNode(o),window.getSelection().addRange(s),document.execCommand("copy"),window.getSelection().removeAllRanges(),$(".select").remove(),$(".done-js").removeClass("done-error").addClass("done-successful").fadeIn(100),setTimeout(function(){$(".done-js").fadeOut(500)},200)}catch(t){$(".done-js").removeClass("done-successful").addClass("done-error").fadeIn(100),setTimeout(function(){$(".done-js").fadeOut(500)},200)}}),$(".show-more-js").on("click",function(){var t=$(this).find("i");t.hasClass("fa-chevron-up")?($(".all-tags-js").slideUp(),t.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),$(".most-popular-js").empty().append(a.mostPopular())):($(".all-tags-js").slideDown(),$(".most-popular-js").empty().append("<h3>all tags</h3>"),t.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"))}),$(".close-js").on("click",function(){$(".start-js").empty(),o.gifCol=gifObj.items,o.count=0,o.loadContent(n.amountLoadedItem),$(".close-js").hide()}),$(".btn-top-js").on("click",function(){$("html").animate({scrollTop:0},500)})},_scrollEvents:function(){$(window).on("scroll",function(){o.loadContent(n.amountLoadedItem),$(window).scrollTop()>=200?$(".btn-top-js").fadeIn(200):$(".btn-top-js").fadeOut(200)})}}).init()});