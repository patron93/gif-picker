$(function(){var t=$(".start-js"),e=$(".page-js"),n={amountStartItems:20,amountLoadedItem:20,amountPopularTags:20},s={count:n.amountStartItems,gifCol:gifObj.items,loadContent:function(t){var e=$(document).height(),n=$(".position-js").offset().top,s=this.gifCol.length,o=s-this.count;n>=e-100&&this.count+t<=s?(i.pushContainer(this.count,t,this.gifCol),this.count+=t):n>=e-100&&o<t&&(i.pushContainer(this.count,o,this.gifCol),this.count+=o)}},o=function(){function e(t){var e;for(e=0;e<gifObj.items.length;e++)gifObj.items[e].keys.indexOf(t)>-1&&o.push(gifObj.items[e]);return o}var o=[];return{showResult:function(a){o=[],e(a),t.find("img").attr("src"," "),t.empty(),o.length<=n.amountStartItems?i.pushContainer(0,o.length,o):i.pushContainer(0,n.amountStartItems,o),s.gifCol=o,s.count=n.amountStartItems}}}(),a=function(){var t,e,s,o,a=[],i={};for(t=0;t<gifObj.items.length;t++)for(e=0;e<gifObj.items[t].keys.length;e++)i[o=gifObj.items[t].keys[e]]?i[o]+=1:i[o]=1;for(s in i)a.push({name:s,value:i[s]});return a.sort(function(t,e){return e.value-t.value}),{allTags:function(){var t,e;for($(".hash-js").append('<div class="container-fluid"><div class="row"><ul class="all-tags all-tags-js"></ul></div></div>'),t=$(".all-tags-js"),e=0;e<a.length;e++)t.append("<li>#"+a[e].name+"</li>")},mostPopular:function(){var t,e,s,o;for($(".most-popular-js").append('<ul class="popular popular-js"></ul>'),e=(t=$(".popular-js")).width(),s=0,o=0;o<n.amountPopularTags&&!(s>e);o++)t.append("<li>#"+a[o].name+"</li>"),s+=t.find("li").eq(o).outerWidth(!0);t.find("li").last().remove(),t.find("li").last().remove()}}}(),i=function(){function e(e,n){var s,o,a,i,l;(s=document.createElement("div")).classList.add("col-xl-2","col-lg-3","col-md-4","col-sm-6"),(o=document.createElement("div")).classList.add("thumb","thumb-js"),(a=document.createElement("img")).src=e,(i=document.createElement("ul")).classList.add("tags","tags-js"),$.each(n,function(t,e){(l=document.createElement("li")).innerHTML="#"+e,i.appendChild(l)}),o.appendChild(a),o.appendChild(i),s.appendChild(o),t.append(s)}return{pushContainer:function(t,n,s){var o;for(o=t;o<t+n;o++)e(s[o].src,s[o].keys)}}}();({init:function(){this._addElements(),this._startItems(),this._clickEvents(),this._scrollEvents()},_startItems:function(){i.pushContainer(0,n.amountStartItems,gifObj.items)},_addElements:function(){$("body").prepend('<div class="done done-top done-js done-top-js"></div><div class="done done-bot done-js done-bot-js"></div><div class="position position-js"></div>'),$(".most-popular-js").append(a.mostPopular()),$(".hash-js").append(a.allTags())},_clickEvents:function(){e.on("click","li",function(t){var e=$(this).text().slice(1);o.showResult(e),$(".search-state-js").show().find(".search-tag-js").text("#"+e),t.stopPropagation()}),e.on("click",".thumb-js",function(){var e=$(this).find("img").attr("src"),n=e.slice(0,e.length-2)+"orig";window.getSelection().removeAllRanges(),t.append('<p class="select">'+n+"</p>");try{var s=document.querySelector(".select"),o=document.createRange();o.selectNode(s),window.getSelection().addRange(o),document.execCommand("copy"),window.getSelection().removeAllRanges(),$(".select").remove(),$(".done-js").removeClass("done-error").addClass("done-successful").fadeIn(100),setTimeout(function(){$(".done-js").fadeOut(500)},200)}catch(t){$(".done-js").removeClass("done-successful").addClass("done-error").fadeIn(100),setTimeout(function(){$(".done-js").fadeOut(500)},200)}}),$(".show-more-js").on("click",function(){"on"===$(this).data("opened")?($(this).data("opened","off"),$(".all-tags-js").slideUp(),$(this).find("span").text("show more tags"),$(".most-popular-js").empty().append(a.mostPopular())):($(".all-tags-js").slideDown(),$(".most-popular-js").empty().append("<h4>all tags</h4>"),$(this).find("span").text("show less tags"),$(this).data("opened","on"))}),$(".close-js").on("click",function(){$(".start-js").empty(),s.gifCol=gifObj.items,s.count=0,s.loadContent(n.amountLoadedItem),$(".search-state-js").hide()}),$(".btn-top-js").on("click",function(){$("html").animate({scrollTop:0},500)})},_scrollEvents:function(){$(window).on("scroll",function(){s.loadContent(n.amountLoadedItem),$(window).scrollTop()>=200?$(".btn-top-js").fadeIn(200):$(".btn-top-js").fadeOut(200)})}}).init()});